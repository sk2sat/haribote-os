4-1 C言語からメモリに書き込みたい

はい，C言語がいい感じに使えるようになったので色々やっていこうと思います．
思うのですが，画面が真っ黒のままでは面白くないです．
というわけで画面に何か描きます．
画面に何か描くにはVRAMに何か書きこめばいいので，MOVすればいいわけです．

で，C言語で指定したメモリに何か書く方法なんですが，これがあの悪名高きポインタってやつなんですね．
なのでポインタは一旦置いておいて，ポインタ以外の方法を使います．
ではどうするのかというと，ようはMOVをすればいいので，MOVする関数をアセンブラで作ってそれを呼び出してやります．

これをやるのがnaskfunc.nasのwrite_mem8関数です．
ちなみに，今までスルーしてましたがC用の関数をアセンブラで作る場合には関数名の最初にアンダースコアをつけます．
Cで作った関数をコンパイルしてアセンブラになったところを見ると同じようになっています
(なお，C++だと名前マングリングというものがありこうはいきません)．

write_mem8では引数としてアドレスとデータを取っていますが，Cの関数で引数がどのように扱われるのかというと，
n番目の引数は```[ESP+ 4*n]```に格納されています(実はこれは32bitの時の話で，64bitになると最初の数個がレジスタだったりします)．

ようは第1引数をECXに入れて，第2引数をALに入れて，ECXの番地にALを入れているだけです．
単純ですね．

あとはこの関数を使ってVRAMに書き込めばいいわけです．
現在のモードでのVRAMのアドレスは0xa0000〜0xaffffなので，for文でループしてVRAMを15で埋め尽くしています．
この15というのは色の番号で，ここでは白なのでこれを実行すると真っ白になります．
